# IOWarp Runtime Basic Deployment Pipeline
# Purpose: Deploy the IOWarp (Chimaera) runtime on distributed nodes
# Requirements: chimaera_start_runtime and chimaera_stop_runtime installed in PATH

name: iowarp_basic_runtime

pkgs:
  - pkg_type: jarvis_wrp_runtime.wrp_runtime
    pkg_name: runtime
    sleep: 1
  - pkg_type: jarvis_wrp_cte.wrp_cte
    pkg_name: cte_runtime
    devices:
      - ["${HOME}/test_hermes/hermes.bin", "1TB", 0.9] 
    worker_count: 4 
  - pkg_type: builtin.ior
    pkg_name: benchmark
    interceptors: ["cte_adapters"]
    nprocs: 1
    block: "1G"
    transfer: "1M"
    api: "POSIX"
    out: "${HOME}/test_hermes/ior.bin"
    do_dbg: true
    dbg_port: 4001
interceptors: 
  - pkg_type: jarvis_wrp_cte.wrp_adapters
    pkg_name: cte_adapters
    posix: true
    include: 
      - ${HOME}/test_hermes